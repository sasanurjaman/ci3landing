<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');class Masters extends CI_Controller {	function __construct()    {        parent::__construct();		if(!$this->session->userdata('SESS_USER_ID'))			redirect('/');                $this->data = array(			"company" => $this->sim_model->data(),			"iconpage" => "fa fa-folder",			"mainpage" => "ADMINISTRASI"        );	}	    function position()	{		$this->load->model('position_model');				if ($this->uri->segment(3) != '')			$search = $this->uri->segment(3);		elseif ($this->input->post('txtsearch') != null)			$search = $this->input->post('txtsearch');		else			$search = 'null';					/*pagination*/		$n = $this->position_model->datacount($search);		$config['base_url'] = base_url().'index.php/masters/dataposition/'.$search;		$config['total_rows'] = $n;		$config['per_page'] = $this->config->item('show_data');		$config['uri_segment'] = 4;		$this->pagination->initialize($config);		$page = ($this->uri->segment(4) != '' ? $this->uri->segment(4) : 0);				$data = $this->data;        $data['caption'] = 'JABATAN';        $data['datas'] = $this->position_model->datalist($search, $page, $this->config->item('show_data'));        $data['page'] = $page;        $data['search'] = $search;        $data['paging'] = $this->pagination->create_links();        		$this->load->view('masters/position', $data);        $this->sim_model->aktifitas('buka data position');	}	    function dataposition()	{		$this->load->model('position_model');				if ($this->uri->segment(3) != '')			$search = $this->uri->segment(3);		elseif ($this->input->post('txtsearch') != null)			$search = $this->input->post('txtsearch');		else			$search = 'null';					/*pagination*/		$n = $this->position_model->datacount($search);		$config['base_url'] = base_url().'index.php/masters/dataposition/'.$search;		$config['total_rows'] = $n;		$config['per_page'] = $this->config->item('show_data');		$config['uri_segment'] = 4;		$this->pagination->initialize($config);		$page = ($this->uri->segment(4) != '' ? $this->uri->segment(4) : 0);				$data = $this->data;        $data['caption'] = 'JABATAN';        $data['datas'] = $this->position_model->datalist($search, $page, $this->config->item('show_data'));        $data['page'] = $page;        $data['search'] = $search;        $data['paging'] = $this->pagination->create_links();        		$this->load->view('masters/dataposition', $data);	}    	function addposition()	{		$search = $this->uri->segment(3);		$page = $this->uri->segment(4);					$data = $this->data;		$data['caption'] = 'JABATAN BARU';		$data['page'] = $page;		$data['search'] = $search;        		$this->load->view('masters/addposition', $data);        $this->sim_model->aktifitas('buka form tambah data position');	}		function editposition()	{		$this->load->model('position_model');		$search = $this->uri->segment(3);		$page = $this->uri->segment(4);		$id = $this->uri->segment(5);				$data = $this->data;		$data['caption'] = 'UBAH JABATAN';		$data['datas'] = $this->position_model->dataid($id);		$data['page'] = $page;		$data['search'] = $search;        		$this->load->view('masters/addposition', $data);        $this->sim_model->aktifitas('buka form ubah data position');	}    	function activeposition()	{		$this->load->model('position_model');        $data = array();		$id = $this->uri->segment(5);                $data = array('status' => $this->position_model->activated($id));        $this->sim_model->aktifitas('enable/disable data position');        echo json_encode($data);	}		function delposition()	{		$this->load->model('position_model');		$data = array();        $search = $this->uri->segment(3);		$page = $this->uri->segment(4);		$id = $this->uri->segment(5);        $data = $this->position_model->delete($id);        $this->sim_model->aktifitas('hapus data position `'.$delkey.'`: '.$data['title']);        		echo json_encode($data);	}		function updateposition()	{		$this->load->model('position_model');        $data = array();		$caption = $this->input->post('caption');		$page = $this->input->post('page');		$search = $this->input->post('search');				if ($this->position_model->validation())		{			if ($caption == 'UBAH JABATAN')			{				$data = $this->position_model->update();                $this->sim_model->aktifitas('ubah perubahan data position');			}			else			{				$data = $this->position_model->insert();                $this->sim_model->aktifitas('simpan data position baru');			}		}		else		{			if (form_error('txtcode'))				$data = array('title' => 'Kesalahan', 'notif' => 'modal-danger', 'messg' => 'Data Kode kosong!', 'elfocus' => '#txtcode');            elseif (form_error('txtname'))                $data = array('title' => 'Kesalahan', 'notif' => 'modal-danger', 'messg' => 'Data Nama kosong!', 'elfocus' => '#txtname');		}                echo json_encode($data);	}        function division()	{		$this->load->model('division_model');				if ($this->uri->segment(3) != '')			$search = $this->uri->segment(3);		elseif ($this->input->post('txtsearch') != null)			$search = $this->input->post('txtsearch');		else			$search = 'null';					/*pagination*/		$n = $this->division_model->datacount($search);		$config['base_url'] = base_url().'index.php/masters/datadivision/'.$search;		$config['total_rows'] = $n;		$config['per_page'] = $this->config->item('show_data');		$config['uri_segment'] = 4;		$this->pagination->initialize($config);		$page = ($this->uri->segment(4) != '' ? $this->uri->segment(4) : 0);				$data = $this->data;        $data['caption'] = 'DIVISI';        $data['datas'] = $this->division_model->datalist($search, $page, $this->config->item('show_data'));        $data['page'] = $page;        $data['search'] = $search;        $data['paging'] = $this->pagination->create_links();        		$this->load->view('masters/division', $data);        $this->sim_model->aktifitas('buka data division');	}	    function datadivision()	{		$this->load->model('division_model');				if ($this->uri->segment(3) != '')			$search = $this->uri->segment(3);		elseif ($this->input->post('txtsearch') != null)			$search = $this->input->post('txtsearch');		else			$search = 'null';					/*pagination*/		$n = $this->division_model->datacount($search);		$config['base_url'] = base_url().'index.php/masters/datadivision/'.$search;		$config['total_rows'] = $n;		$config['per_page'] = $this->config->item('show_data');		$config['uri_segment'] = 4;		$this->pagination->initialize($config);		$page = ($this->uri->segment(4) != '' ? $this->uri->segment(4) : 0);				$data = $this->data;        $data['caption'] = 'DIVISI';        $data['datas'] = $this->division_model->datalist($search, $page, $this->config->item('show_data'));        $data['page'] = $page;        $data['search'] = $search;        $data['paging'] = $this->pagination->create_links();        		$this->load->view('masters/datadivision', $data);	}    	function addivision()	{		$search = $this->uri->segment(3);		$page = $this->uri->segment(4);					$data = $this->data;		$data['caption'] = 'DIVISI BARU';		$data['page'] = $page;		$data['search'] = $search;        		$this->load->view('masters/addivision', $data);        $this->sim_model->aktifitas('buka form tambah data division');	}		function editdivision()	{		$this->load->model('division_model');		$search = $this->uri->segment(3);		$page = $this->uri->segment(4);		$id = $this->uri->segment(5);				$data = $this->data;		$data['caption'] = 'UBAH DIVISI';		$data['datas'] = $this->division_model->dataid($id);		$data['page'] = $page;		$data['search'] = $search;        		$this->load->view('masters/addivision', $data);        $this->sim_model->aktifitas('buka form ubah data division');	}    	function activedivision()	{		$this->load->model('division_model');        $data = array();		$id = $this->uri->segment(5);                $data = array('status' => $this->division_model->activated($id));        $this->sim_model->aktifitas('enable/disable data division');        echo json_encode($data);	}		function deldivision()	{		$this->load->model('division_model');		$data = array();        $search = $this->uri->segment(3);		$page = $this->uri->segment(4);		$id = $this->uri->segment(5);        $data = $this->division_model->delete($id);        $this->sim_model->aktifitas('hapus data division `'.$delkey.'`: '.$data['title']);        		echo json_encode($data);	}		function updatedivision()	{		$this->load->model('division_model');        $data = array();		$caption = $this->input->post('caption');		$page = $this->input->post('page');		$search = $this->input->post('search');				if ($this->division_model->validation())		{			if ($caption == 'UBAH DIVISI')			{				$data = $this->division_model->update();                $this->sim_model->aktifitas('ubah perubahan data division');			}			else			{				$data = $this->division_model->insert();                $this->sim_model->aktifitas('simpan data division baru');			}		}		else		{			if (form_error('txtcode'))				$data = array('title' => 'Kesalahan', 'notif' => 'modal-danger', 'messg' => 'Data Kode kosong!', 'elfocus' => '#txtcode');            elseif (form_error('txtname'))                $data = array('title' => 'Kesalahan', 'notif' => 'modal-danger', 'messg' => 'Data Nama kosong!', 'elfocus' => '#txtname');		}                echo json_encode($data);	}        function place()	{		$this->load->model('place_model');				if ($this->uri->segment(3) != '')			$search = $this->uri->segment(3);		elseif ($this->input->post('txtsearch') != null)			$search = $this->input->post('txtsearch');		else			$search = 'null';					/*pagination*/		$n = $this->place_model->datacount($search);		$config['base_url'] = base_url().'index.php/masters/dataplace/'.$search;		$config['total_rows'] = $n;		$config['per_page'] = $this->config->item('show_data');		$config['uri_segment'] = 4;		$this->pagination->initialize($config);		$page = ($this->uri->segment(4) != '' ? $this->uri->segment(4) : 0);				$data = $this->data;        $data['caption'] = 'POSISI';        $data['datas'] = $this->place_model->datalist($search, $page, $this->config->item('show_data'));        $data['page'] = $page;        $data['search'] = $search;        $data['paging'] = $this->pagination->create_links();        		$this->load->view('masters/place', $data);        $this->sim_model->aktifitas('buka data place');	}	    function dataplace()	{		$this->load->model('place_model');				if ($this->uri->segment(3) != '')			$search = $this->uri->segment(3);		elseif ($this->input->post('txtsearch') != null)			$search = $this->input->post('txtsearch');		else			$search = 'null';					/*pagination*/		$n = $this->place_model->datacount($search);		$config['base_url'] = base_url().'index.php/masters/dataplace/'.$search;		$config['total_rows'] = $n;		$config['per_page'] = $this->config->item('show_data');		$config['uri_segment'] = 4;		$this->pagination->initialize($config);		$page = ($this->uri->segment(4) != '' ? $this->uri->segment(4) : 0);				$data = $this->data;        $data['caption'] = 'POSISI';        $data['datas'] = $this->place_model->datalist($search, $page, $this->config->item('show_data'));        $data['page'] = $page;        $data['search'] = $search;        $data['paging'] = $this->pagination->create_links();        		$this->load->view('masters/dataplace', $data);	}    	function addplace()	{		$search = $this->uri->segment(3);		$page = $this->uri->segment(4);					$data = $this->data;		$data['caption'] = 'POSISI BARU';		$data['page'] = $page;		$data['search'] = $search;        		$this->load->view('masters/addplace', $data);        $this->sim_model->aktifitas('buka form tambah data place');	}		function editplace()	{		$this->load->model('place_model');		$search = $this->uri->segment(3);		$page = $this->uri->segment(4);		$id = $this->uri->segment(5);				$data = $this->data;		$data['caption'] = 'UBAH POSISI';		$data['datas'] = $this->place_model->dataid($id);		$data['page'] = $page;		$data['search'] = $search;        		$this->load->view('masters/addplace', $data);        $this->sim_model->aktifitas('buka form ubah data place');	}    	function activeplace()	{		$this->load->model('place_model');        $data = array();		$id = $this->uri->segment(5);                $data = array('status' => $this->place_model->activated($id));        $this->sim_model->aktifitas('enable/disable data place');        echo json_encode($data);	}		function delplace()	{		$this->load->model('place_model');		$data = array();        $search = $this->uri->segment(3);		$page = $this->uri->segment(4);		$id = $this->uri->segment(5);        $data = $this->place_model->delete($id);        $this->sim_model->aktifitas('hapus data place `'.$delkey.'`: '.$data['title']);        		echo json_encode($data);	}		function updateplace()	{		$this->load->model('place_model');        $data = array();		$caption = $this->input->post('caption');		$page = $this->input->post('page');		$search = $this->input->post('search');				if ($this->place_model->validation())		{			if ($caption == 'UBAH POSISI')			{				$data = $this->place_model->update();                $this->sim_model->aktifitas('ubah perubahan data place');			}			else			{				$data = $this->place_model->insert();                $this->sim_model->aktifitas('simpan data place baru');			}		}		else		{			if (form_error('txtcode'))				$data = array('title' => 'Kesalahan', 'notif' => 'modal-danger', 'messg' => 'Data Kode kosong!', 'elfocus' => '#txtcode');            elseif (form_error('txtname'))                $data = array('title' => 'Kesalahan', 'notif' => 'modal-danger', 'messg' => 'Data Nama kosong!', 'elfocus' => '#txtname');		}                echo json_encode($data);	}        function saving()	{		$this->load->model('saving_model');				if ($this->uri->segment(3) != '')			$search = $this->uri->segment(3);		elseif ($this->input->post('txtsearch') != null)			$search = $this->input->post('txtsearch');		else			$search = 'null';					/*pagination*/		$n = $this->saving_model->datacount($search);		$config['base_url'] = base_url().'index.php/masters/datasaving/'.$search;		$config['total_rows'] = $n;		$config['per_page'] = $this->config->item('show_data');		$config['uri_segment'] = 4;		$this->pagination->initialize($config);		$page = ($this->uri->segment(4) != '' ? $this->uri->segment(4) : 0);				$data = $this->data;        $data['caption'] = 'SIMPANAN';        $data['datas'] = $this->saving_model->datalist($search, $page, $this->config->item('show_data'));        $data['page'] = $page;        $data['search'] = $search;        $data['paging'] = $this->pagination->create_links();        		$this->load->view('masters/saving', $data);        $this->sim_model->aktifitas('buka data saving');	}	    function datasaving()	{		$this->load->model('saving_model');				if ($this->uri->segment(3) != '')			$search = $this->uri->segment(3);		elseif ($this->input->post('txtsearch') != null)			$search = $this->input->post('txtsearch');		else			$search = 'null';					/*pagination*/		$n = $this->saving_model->datacount($search);		$config['base_url'] = base_url().'index.php/masters/datasaving/'.$search;		$config['total_rows'] = $n;		$config['per_page'] = $this->config->item('show_data');		$config['uri_segment'] = 4;		$this->pagination->initialize($config);		$page = ($this->uri->segment(4) != '' ? $this->uri->segment(4) : 0);				$data = $this->data;        $data['caption'] = 'SIMPANAN';        $data['datas'] = $this->saving_model->datalist($search, $page, $this->config->item('show_data'));        $data['page'] = $page;        $data['search'] = $search;        $data['paging'] = $this->pagination->create_links();        		$this->load->view('masters/datasaving', $data);	}    	function addsaving()	{		$search = $this->uri->segment(3);		$page = $this->uri->segment(4);					$data = $this->data;		$data['caption'] = 'SIMPANAN BARU';		$data['page'] = $page;		$data['search'] = $search;        		$this->load->view('masters/addsaving', $data);        $this->sim_model->aktifitas('buka form tambah data saving');	}		function editsaving()	{		$this->load->model('saving_model');		$search = $this->uri->segment(3);		$page = $this->uri->segment(4);		$id = $this->uri->segment(5);				$data = $this->data;		$data['caption'] = 'UBAH SIMPANAN';		$data['datas'] = $this->saving_model->dataid($id);		$data['page'] = $page;		$data['search'] = $search;        		$this->load->view('masters/addsaving', $data);        $this->sim_model->aktifitas('buka form ubah data saving');	}	    function comboposition()    {        $this->load->model('position_model');        $data = array();        $key = ($this->input->post('txtkey') != '' ? $this->input->post('txtkey') : null);        $data = $this->position_model->datacombo($key);                echo json_encode($data);    }    	function activesaving()	{		$this->load->model('saving_model');        $data = array();		$id = $this->uri->segment(5);                $data = array('status' => $this->saving_model->activated($id));        $this->sim_model->aktifitas('enable/disable data saving');        echo json_encode($data);	}		function delsaving()	{		$this->load->model('saving_model');		$data = array();        $search = $this->uri->segment(3);		$page = $this->uri->segment(4);		$id = $this->uri->segment(5);        $data = $this->saving_model->delete($id);        $this->sim_model->aktifitas('hapus data saving `'.$delkey.'`: '.$data['title']);        		echo json_encode($data);	}		function updatesaving()	{		$this->load->model('saving_model');        $data = array();		$caption = $this->input->post('caption');		$page = $this->input->post('page');		$search = $this->input->post('search');				if ($this->saving_model->validation())		{			if ($caption == 'UBAH SIMPANAN')			{				$data = $this->saving_model->update();                $this->sim_model->aktifitas('ubah perubahan data saving');			}			else			{				$data = $this->saving_model->insert();                $this->sim_model->aktifitas('simpan data saving baru');			}		}		else		{			if (form_error('txtype'))				$data = array('title' => 'Kesalahan', 'notif' => 'modal-danger', 'messg' => 'Data Jenis kosong!', 'elfocus' => '#txtype');            elseif (form_error('txtprice'))                $data = array('title' => 'Kesalahan', 'notif' => 'modal-danger', 'messg' => 'Data Nominal kosong!', 'elfocus' => '#txtprice');		}                echo json_encode($data);	}}/* End of file masters.php *//* Lotypesion: ./applitypesion/controllers/masters.php */